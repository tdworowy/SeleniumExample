pipeline {
    agent { label 'master'}
    stages {
      stage("Clean workspace"){
                steps {
                    cleanWs()
                }
            }
     stage("Pull changes from git"){
               steps{
                    git 'https://github.com/tdworowy/SeleniumExample.git'
                }
            }
      stage('Run Tests')
        {
             steps{
                    dir('java') {
                        bat 'mvn clean test'
                    }
                }
          }
         }
      post {
        always {
          dir('java') {
            //  junit "target\\surefire-reports\\*.xml"
            //  archiveArtifacts "target\\surefire-reports\\*"
             // archiveArtifacts "target\\cucumber-reports\\*"
              archiveArtifacts "TestLogs\\*\\*"
              archiveArtifacts "allure-results\\*\\*"
              allure includeProperties: false, jdk: '', results: [[path: 'allure-results']]
          }
        }
      }
}